<!DOCTYPE html> <html lang="en"> <head> <title>PicketLink</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <link href="http://picketlink.org/css/bootstrap-community.min.css" media="screen" rel="stylesheet"> <script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script> </link> <link href="http://design.jboss.org/picketlink/logo/images/favicon.ico" rel="shortcut icon"> <style>
      @media (min-width: 980px) {
        .banner { background-image: url(http://www.jboss.org/dms/picketlink/images/picketlink-banner-1180px.png); background-repeat: no-repeat; height: 110px;  }
      }
      @media (max-width: 979px) {
        .banner { background-image: url(http://design.jboss.org/picketlink/logo/images/picketlink_logo_600x.png); background-repeat:no-repeat; height: 60px; }
      }
      @media (max-width: 650px) {
        .banner { width: 500px; margin: 0px auto; }
      }
    </style> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <link href="http://picketlink.org/stylesheets/blog.css" rel="stylesheet" type="text/css"> <link href="http://picketlink.org/stylesheets/asciidoctor-coderay.css" media="screen" rel="stylesheet" type="text/css"> <style>
      td.download-size {
        text-align: right;
        padding-right: 10px;
      } 
      
      .white-stripes tr:nth-child(even) {
        background-color: white;
      }
      .white-stripes tr:nth-child(odd) {
        background-color: none;
      }
    </style> </head> <body> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div class="dropup"> <a class="tabnav-closed" href="https://www.redhat.com" id="tab">Red Hat</a> </div> <div class="banner"> <a href="#"></a> <div class="taglinedark visible-desktop">Usable Security.</div> </div> <div class="navbar navbar-inverse" id="navbar-fix"> <div class="navbar-inner"> <div class="container"> <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <div class="nav-collapse collapse"> <ul class="nav" id="nav"> <li class=""><a href="http://picketlink.org/">Home</a></li> <li class=""><a href="http://picketlink.org/about/">About</a></li> <li class=""><a href="http://picketlink.org/news">News</a></li> <li class=""><a href="http://picketlink.org/gettingstarted/">Getting Started</a></li> <li class=""><a href="http://docs.jboss.org/picketlink/2/latest/reference/html/">Documentation</a></li> <li class=""><a href="http://picketlink.org/gethelp/">Get Help</a></li> <li class=""><a href="https://github.com/picketlink/picketlink">Source Code</a></li> <li class=""><a href="http://picketlink.org/testimonials/testimonial/">Testimonials</a></li> <li class=""><a href="http://picketlink.org/joinus/">Join Us</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Follow Us <b class="caret"></b></a> <ul class="dropdown-menu projectsocialmedia"> <li><a href="http://twitter.com/picketlink"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_twitter.png"></a></li> <li><a href="https://plus.google.com/communities/101791570551871936976"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_googleplus.png"></a></li> </ul> </li> </ul> </div> </div> </div> </div> <span id="page"></span> <div class="row-fluid"> <div class="row-fluid"> <div class="span12 well post-bg"> <div class="row-fluid"> <div class="span12"> <h2>First PicketLink CDI Application</h2> <p> This guide will show you how to secure a very simple application using PicketLink. It will cover some core concepts and make it easier for you to understand how those concepts are applied in a project. </p> <p> It will show you how to add the following capabilities to your application: <ul> <li>Identity Management</li> <li>Authentication and Logout</li> </ul> </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>System Requirements</h3> <p> Make sure your environment is properly configured as follows: <ul> <li>Java 1.6 or Java 1.7</li> <li>Maven 3.0.0 or newer</li> <li>JBoss Enterprise Application Platform 6 or WildFly Servers.</li> </ul> </p> <div class="well"> <b>You need some experience with Apache Maven to follow this guide. If you're not familiar with Maven, please visit this <a href="http://maven.apache.org/">site</a> first.</b> </div> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Create a Maven Web Application Project</h3> <p> There are a lot of ways of doing this. One of them is by using a Maven Archetype to generate the project, as follows: <div class="well"> mvn archetype:generate -DgroupId=org.picketlink.tutorial -DartifactId=picketlink-app -DarchetypeArtifactId=maven-archetype-webapp </div> </p> <p> You can also use your favorite IDE to create the project. The important thing here is that you end up with a project with the following structure: <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;picketlink-app/&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;src/&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main/&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java/&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webapp/&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WEB-INF/&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;pom.xml</pre> </p> <p> And your <b>pom.xml</b> should looks like this: <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;<br/>&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.picketlink.tutorial&lt;/groupId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;picketlink-app&lt;/artifactId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;packaging&gt;war&lt;/packaging&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;<br/>&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;First PicketLink CDI Application&lt;/name&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Tutorial about how to secure a simple application using PicketLink.&lt;/description&gt;<br/>&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;build&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;finalName&gt;picketlink-app&lt;/finalName&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;/build&gt;&#x000A;            &lt;/project&gt;</pre> </p> <p> To check if your project is properly configured with Maven, execute the following command in the project's root folder: <div class="well"> mvn clean install </div> <p> If everything is fine you should see following output from this command: <div class="well"> [INFO] ------------------------------------------------------------------------<br/> [INFO] BUILD SUCCESS<br/> [INFO] ------------------------------------------------------------------------ </div> </p> <p> You should also confirm that you have a WAR package at <b>target/picketlink-app.war</b>. </p> </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Configuring PicketLink Dependencies</h3> <p> Now that your project is created you can add the PicketLink Dependencies to it. For this we'll use the PicketLink Bill of Materials(BOM), which provides a simpler way to configure the dependencies of your project. </p> <p> To configure the dependencies, add the following configuration to pom.xml: <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;properties&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;version.picketlink.javaee.bom&gt;2.6.0.CR1&lt;/version.picketlink.javaee.bom&gt;&#x000A;            &lt;/properties&gt;&#x000A;            &lt;dependencyManagement&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;dependencies&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.picketlink&lt;/groupId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;picketlink-javaee-6.0&lt;/artifactId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;type&gt;pom&lt;/type&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;import&lt;/scope&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;${version.picketlink.javaee.bom}&lt;/version&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependencies&gt;&#x000A;            &lt;/dependencyManagement&gt;&#x000A;            &lt;dependencies&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.picketlink&lt;/groupId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;picketlink-api&lt;/artifactId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;compile&lt;/scope&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;dependency&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.picketlink&lt;/groupId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;picketlink-impl&lt;/artifactId&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;scope&gt;runtime&lt;/scope&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;/dependency&gt;&#x000A;            &lt;/dependencies&gt;</pre> </p> <p> The above configuration will make the PicketLink API libraries available to your project, so you can use them to build your classes later. </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Configuring CDI and JSF</h3> <p> This application is CDI and JSF based. Given that, we need to enable both technologies for the project. </p> <p> To enable CDI, you just need to add a <b>src/main/webapp/WEB-INF/beans.xml</b> marker file with the following content: <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Marker file indicating CDI should be enabled --&gt;&#x000A;            &lt;beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd"&gt;&#x000A;            &lt;/beans&gt;</pre> </p> <p> For JSF, you just need to add a <b>src/main/webapp/WEB-INF/faces-config.xml</b> marker file with the following content: <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Marker file indicating JSF should be enabled --&gt;&#x000A;            &lt;faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"&gt;&#x000A;            &lt;/faces-config&gt;</pre> </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Creating the User Registration Bean</h3> <p> Now that CDI is properly configured, we can start creating some beans. The first bean we'll create is responsible for creating new users using the <b>PicketLink Identity Management API</b>. </p> <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Named&#x000A;          &nbsp;&nbsp;@RequestScoped&#x000A;          &nbsp;&nbsp;public class UserRegistration {&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Inject&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>private IdentityManager identityManager;</b><br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private String loginName;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private String firstName;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private String lastName;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private String password;<br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public String register() {&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User newUser = new User(this.loginName);<br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newUser.setFirstName(this.firstName);&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newUser.setLastName(this.lastName);<br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>this.identityManager.add(newUser);</b><br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password password = new Password(this.password);<br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>this.identityManager.updateCredential(newUser, password);</b><br/>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "/signin.xhtml";&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#x000A;          &nbsp;&nbsp;}</pre> <div class="well"> This is a very simple bean. Fields are not being validated to highlight only the important bits of code for the sake of this guide. Don't forget to validate all fields when working with a real world app ! </div> <p> Basically, this bean receives some input from a JSF page (which we'll create next) and stores a new user in an <b>Identity Store</b>. An Identity Store is a repository where all identity data is located, such as users, roles, groups, credentials, etc. When you don't provide any configuration for PicketLink IDM, it by default uses a File-based Identity Store. This is very handy for demos, during development and testing. But when doing things for real, you will probably prefer a LDAP or a Database as your Identity Store. </p> <p> PicketLink supports differents identity stores, providing out-of-the-box implementations using LDAP and JPA. For more information about how to configure PicketLink IDM, please check our <a href="http://docs.jboss.org/picketlink/2/latest/reference/html_single/#picketlink-idm-configuration">documentation.</a> </p> <p> Another important thing to consider in this bean is the usage of the <b>IdentityManager</b>. This bean is used to manage identity objects within the scope of a partition. Some examples of identity objects are users, groups and roles, although PicketLink is not limited to just these. Besides providing the standard set of CRUD methods for managing and locating identity objects, the IdentityManager interface also defines methods for managing credentials and for creating identity queries which may be used to locate identities by their properties and attributes. </p> <p> You may also notice that the bean also creates a credential for the user. In this case we're creating a Username/Password credential type, although PicketLink is not limited to just this. You can even provide your credential types and handlers. PicketLink also provides built-in support for other credential types such as DIGEST, Two-Factor Authentication and X509 Certificates. </p> <p> For more information about PicketLink Identity Manager API, please check our <a href="http://docs.jboss.org/picketlink/2/latest/reference/html_single/#picketlink-idm-overview">documentation.</a> </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Creating the User Registration JSF Page</h3> <p> If you're familiar with JSF then there's no secrets here. We're just binding some form fields to the previously created <b>UserRegistration</b> bean. </p> <p> You need to add the following page at this location: <b>src/main/webapp/signup.xhtml</b>. </p> <pre><div class="plain">&#x000A;            &lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"&gt;&#x000A;            &lt;body&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;Please, enter your information:&lt;br/&gt;&lt;br/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;h:form&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;First Name: &lt;h:inputText value="{userRegistration.firstName}" required="true"/&gt;&lt;br/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last Name: &lt;h:inputText value="{userRegistration.lastName}" required="true"/&gt;&lt;br/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Username: &lt;h:inputText value="{userRegistration.loginName}" required="true"/&gt;&lt;br/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password: &lt;h:inputSecret value="{userRegistration.password}" required="true"/&gt;&lt;br/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h:commandButton value="Finish" action="{userRegistration.register}"/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&lt;/h:form&gt;&#x000A;            &lt;/body&gt;&#x000A;            &lt;/html&gt;&#x000A;          </div></pre> <p> Now that you have both page and backing bean created, you can try to create an user. </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Deploying the Application</h3> <p> Deploying the application takes just a few simple steps. First, create a WAR package by running the following command in the project's root directory. </p> <div class="well"> mvn clean package </div> <p> This command will create a WAR package inside <b>target/picketlink-app.war</b>. </p> <p> You can now start your server and copy this file to the <b>${JBOSS_HOME}/standalone/deployments</b> directory to deploy the application. To check if the application is properly deployed you should be able to access it from your browser by entering the following URL: </p> <div class="well"> http://localhost:8080/picketlink-app/signup.jsf </div> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>User Authentication</h3> <p> Now that your application is registering new users you can authenticate them based on the information they provide on the registration page. </p> <p> That said, let's create a login page. </p> <pre><div class="plain"></div>&#x000A;          &lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"&gt;&#x000A;          &lt;body&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui:fragment rendered="<b>{not identity.loggedIn}</b>"&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please, enter your credentials:&lt;br/&gt;&lt;br/&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h:form&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Username: &lt;h:inputText value="{<b>loginCredentials.userId</b>}" required="true"/&gt;&lt;br/&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password: &lt;h:inputSecret value="{<b>loginCredentials.password</b>}" required="true"/&gt;&lt;br/&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h:commandButton value="Finish" action="{<b>identity.login</b>}"/&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/h:form&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&lt;/ui:fragment&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui:fragment rendered="{<b>identity.loggedIn</b>}"&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;Welcome {<b>identity.account.firstName</b>} !&lt;/h3&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h:form&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Click here to &lt;h:commandLink action="{<b>identity.logout</b>}"&gt;logout&lt;/h:commandLink&gt;.&lt;/p&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/h:form&gt;&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&lt;/ui:fragment&gt;&#x000A;          &lt;/body&gt;&#x000A;          &lt;/html&gt;</pre> <p> This is a very simple JSF page, divided into two fragments: one unprotected/public section and another section for authenticated users. Both fragments are rendered depending on the return value of <b>identity.loggedIn</b>, which returns true or false indicating whether the current user is authenticated or not. </p> <p> PicketLink has a central component called the <b>Identity</b> bean. The Identity bean (which can be found in the org.picketlink package) is central to PicketLink's security API. This bean represents the authenticated user for the current session, and provides many useful methods for controlling the authentication process and querying the user's assigned privileges. </p> <p> For more information about the Identity bean, check our <a href="http://docs.jboss.org/picketlink/2/latest/reference/html_single/#d5e125">documentation.</a> </p> <p> This bean is able to be referenced directly from JSF pages using EL (@Named("identity")) and also able to be injected into other CDI beans using the @Inject annotation. In our simple application, we don't need to create an authentication bean just to wrap the Identity bean, we can just use it directly from the JSF page. The approach you decide to take depends on your requirements. If you want to perform some additional logic before and after authenticating users, you should create a bean and inject the Identity bean in order to gain more control over the authentication process. </p> <p> The credentials are provided by another PicketLink built-in component, the <b>DefaultLoginCredentials</b>. Like the Identity bean, it can also be referenced directly from JSF pages as well as being injected into other beans using the @Inject annotation. In the page above we are referencing the DefaultLoginCredentials bean directly in order to bind both the userId and password values. </p> <pre><div class="plain">&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Username: &lt;h:inputText value="{<b>loginCredentials.userId</b>}" required="true"/&gt;&lt;br/&gt;&#x000A;            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password: &lt;h:inputSecret value="{<b>loginCredentials.password</b>}" required="true"/&gt;&lt;br/&gt;&#x000A;          </div></pre> <p> PicketLink allows you to use any type of credential you want, including your own custom credential types. The DefaultLoginCredentials is just an out-of-the-box implementation of the <b>Credentials</b> interface that supports a user ID and a credential value. </p> <p> For more information about the DefaultLoginCredentials bean, check our <a href="http://docs.jboss.org/picketlink/2/latest/reference/html_single/#d5e320">documentation.</a> </p> <p> Now that you know how to check if a user is authenticated and how to set their credentials and invoke the authentication process, let's take a look at how users are authenticated. The page above defines a login button which is configured to invoke the <b>identity.login()</b> method. The login() method is the primary point of entry for the authentication process. Invoking this method will cause PicketLink to attempt to authenticate the user based on the credentials that they have provided. </p> <p> When you invoke the identity.login() method, the Identity bean will invoke the methods of the active <b>Authenticator</b> to perform user authentication using the credentials provided by the DefaultLoginCredentials bean. So far we haven't seen any reference or configuration for the Authenticator, and this is fine. The reason is that PicketLink provides a built-in implementation that uses the PicketLink IDM API to retrieve users information and perform the authentication. Given that, we're ready to authenticate any user created by the previously created UserRegistration bean, as it is using the PicketLink IDM API to store them. </p> <p> You're not forced to use always the same Authenticator, it is also possible to provide your own implementation and code the authentication process the way you want. For more details, take a look at our <a href="http://docs.jboss.org/picketlink/2/latest/reference/html_single/#d5e249">documentation.</a> You can even support multiple authentication processes by providing <a href="http://docs.jboss.org/picketlink/2/latest/reference/html_single/#d5e285">multiple authenticators.</a> </p> <p> Another important Identity bean method is the <b>identity.logout()</b>. This method is responsible to logout users and invalidate their security context. </p> <pre><div class="plain"></div>&#x000A;          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Click here to &lt;h:commandLink action="{<b>identity.logout</b>}"&gt;logout&lt;/h:commandLink&gt;.&lt;/p&gt;</pre> <p> In a nutshell, PicketLink provides you complete control over the authentication process. You can provide your own credential types, use your own authenticators to better fit your authentication requirements, listen for specific authentication events such as when an user was authenticated, before and after the authentication begins, user already authenticated, locked account, authentication failed, logout, etc. </p> <p> Check our documentation for more details. </p> </div> </div> <div class="row-fluid"> <div class="span12"> <h3>Summary</h3> <p> Hopefully this guide helped you to understand some core concepts of PicketLink like the <b>IdentityManager</b> and <b>Identity</b> beans, how the authentication process works and the role of the PicketLink Identity Manager API. </p> <p> We covered some important and basic concepts that will help you to deep dive into some more advanced concepts of PicketLink and create more advanced and complex usecases. </p> <p> Most of the things we covered in this guide are also demonstrated by the quickstarts, from where you can get much more usage examples considering different usecases. </p> <p> Fell free to contribute with your own guides and help us to improve PicketLink ! Enjoy it ! </p> </div> </div> </div> </div> </div> </div> <footer class="container"> <div class="row-fluid"> <div class="span2 offset1"> <h4>Navigate</h4> <ul> <li> <a href="http://picketlink.org/about/" title="About">About</a> </li> <li> <a href="http://picketlink.org/gethelp/" title="Get Help">Get Help</a> </li> <li> <a href="https://community.jboss.org/en/picketlink?view=discussion" title="Forums">Forums</a> </li> <li> <a href="http://picketlink.org/gettingstarted/" title="Download">Download</a> </li> </ul> </div> <div class="span2"> <h4>Follow Us</h4> <ul> <li> <a href="https://twitter.com/picketlink" title="Twitter">Twitter</a> </li> <li> <a href="https://plus.google.com/s/Picketlink" title="Google+">Google+</a> </li> </ul> </div> <div class="span2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/PLINK" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/picketlink/picketlink/fork" title="Fork">Fork The Code</a> </li> <li> <a href="http://picketlink.org/joinus/" title="Join Us">Join Us</a> </li> </ul> </div> <div class="span3 offset1"> <h4>Apache 2.0 License</h4> <p>All dependencies of this project are available under the ASLv2 or a compatible license.</p> </div> </div> <div class="row-fluid"> <div class="span6 offset1"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2013 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/picketlink/web-picketlink.org" style="text-decoration: underline;">fork the project,</a> and send a pull request. <br> <i class="icon-share"></i> Website released under <a href="http://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;">CC BY 3.0.</a> </p> </div> <div class="span3 offset1"> <div class="jbossbadge"> <a href="http://www.jboss.org/"> <img src="http://static.jboss.org/theme/images/common/jbossbadge.png"> </a> </div> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="http://picketlink.org/css/bootstrap-community.min.js"></script> <script type='text/javascript' language='JavaScript' src='http://www.redhat.com/j/elqNow/elqCfg.js'></script> <script type='text/javascript' language='JavaScript' src='http://www.redhat.com/j/elqNow/elqImg.js'></script> <div id="oTags"> <script type="text/javascript" src="//www.redhat.com/j/s_code.js"></script> <script type="text/javascript"><!--
      var coreUrl = encodeURI(document.URL.split("?")[0]).replace(/-/g," ");
      var urlSplit = coreUrl.toLowerCase().split(/\//);
      var urlLast = urlSplit[urlSplit.length-1];
      var pageNameString = "";
      var siteName = "";
      var minorSectionIndex = 3
      if (urlLast == "") {
          urlSplit.splice(-1,1);
      }
      if (urlLast.search(/\./) >= 0) {
          if (urlLast == "index.html") {
              urlSplit.splice(-1,1);
          }
          else {
              urlSplit[urlSplit.length-1] = urlLast.split(".").splice(0,1);
          }
      }
      siteName = urlSplit[2].split(".")[1];
      s.prop14 = s.eVar27 = siteName || "";
      s.prop15 = s.eVar28 = urlSplit[minorSectionIndex] || "";
      s.prop16 = s.eVar29 = urlSplit[minorSectionIndex+1] || "";
      pageNameString = urlSplit.splice(3).join(" | ");
      s.pageName = "jboss | community | " + siteName + " | " + pageNameString;
      s.server = "jboss";
      s.channel = "jboss | community";
      s.prop4 = s.eVar23 = encodeURI(document.URL);
      s.prop21 = s.eVar18 = coreUrl;
      s.prop2 = s.eVar22 = "en";
      s.prop3 = s.eVar19 = "us";
      //--></script> <script type="text/javascript" src="//www.redhat.com/j/rh_omni_footer.js"></script> <script language="JavaScript" type="text/javascript"><!--
      if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
      //--></script> <noscript><a href="http://www.omniture.com" title="Web Analytics"><img src="https://smtrcs.redhat.com/b/ss/redhatcom,redhatglobal/1/H.25.4--NS/0?[AQB]&cdp=3&[AQE]" height="1" width="1" border="0" alt=""/></a></noscript> </div> <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script> <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-46906810-1");
    pageTracker._trackPageview();
    } catch(err) {}</script> </body> </html>